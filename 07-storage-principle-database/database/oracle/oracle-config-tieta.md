# 铁塔oracle数据库操作指南

> 安装数据库环境

## 创建数据库环境

### 安装19c数据库

### 创建PDB

> 创建PDB ORCL, 使用GUI创建

```sql
CREATE PLUGGABLE DATABASE ORCL ADMIN USER ORCL IDENTIFIED BY oracle
  STORAGE (MAXSIZE UNLIMITED)
  DEFAULT TABLESPACE ORCL
  DATAFILE '/opt/oracle/oradata/ORCLCDB/orcl/orcl.dbf' SIZE 100M AUTOEXTEND ON
  PATH_PREFIX = '/opt/oracle/oradata/ORCLCDB/orcl/'
  FILE_NAME_CONVERT = ('/opt/oracle/oradata/ORCLCDB/pdbseed', '/opt/oracle/oradata/ORCLCDB/orcl');
```

> 启动PDB ORCL

```sql
ALTER PLUGGABLE DATABASE ORCL OPEN;
```

> 设置自启动, 创建触发器，实现Oracle启动后自动打开PDB

```sql
CREATE TRIGGER open_ORCL
AFTER STARTUP ON DATABASE
BEGIN
   EXECUTE IMMEDIATE 'ALTER PLUGGABLE DATABASE ORCL OPEN';
END open_ORCL;
/
```

> 使用PDB

```sql
alter session set container=ORCL; 
```

#### PDB 删除

> 查看

show pdbs;
ll /opt/oracle/oradata/
ll /opt/oracle/oradata/ORCLCDB/orcl/

> 删除用户

drop user "LLBATTERY_ADMIN" cascade; # 删除用户

> 关闭PDB

ALTER PLUGGABLE DATABASE ORCL CLOSE;

> 删除PDB文件

DROP PLUGGABLE DATABASE ORCL including datafiles;

> 删除目录

rm -rf /opt/oracle/oradata/ORCLCDB/orcl/

### 创建表空间

> 创建表空间和临时表空间 : LDPT LDPT_TEMP 

```sql
CREATE TEMPORARY TABLESPACE LDPT_TEMP TEMPFILE '/opt/oracle/oradata/ORCLCDB/LDPT_TEMP.dbf' SIZE 100 M AUTOEXTEND ON NEXT 100 M MAXSIZE 20480 M EXTENT MANAGEMENT LOCAL;

CREATE TABLESPACE LDPT LOGGING DATAFILE '/opt/oracle/oradata/ORCLCDB/LDPT.dbf' SIZE 100 M AUTOEXTEND ON NEXT 100 M MAXSIZE 20480 M EXTENT MANAGEMENT LOCAL;
```

### 创建用户

> 根据表空间创建用户

```sql
CREATE USER "LLBATTERY_ADMIN" IDENTIFIED BY "amx1823jxX1xasx" DEFAULT TABLESPACE "LDPT" TEMPORARY TABLESPACE "LDPT_TEMP"; 
GRANT "CONNECT", "DBA", "RESOURCE" TO "LLBATTERY_ADMIN";

CREATE USER "LIDIAN" IDENTIFIED BY "amx1823jxX1xasx" DEFAULT TABLESPACE "LDPT" TEMPORARY TABLESPACE "LDPT_TEMP";
GRANT "CONNECT", "DBA", "RESOURCE" TO "LIDIAN";

CREATE USER "CZXK" IDENTIFIED BY "amx1823jxX1xasx" DEFAULT TABLESPACE "LDPT" TEMPORARY TABLESPACE "LDPT_TEMP";
GRANT "CONNECT", "DBA", "RESOURCE" TO "CZXK";
```

```sql
CREATE USER "USER_V_IF_ITOWER" IDENTIFIED BY "interface_1qazse45TGb098" DEFAULT TABLESPACE "LDPT" TEMPORARY TABLESPACE "LDPT_TEMP";
GRANT "CONNECT", "DBA", "RESOURCE" TO "USER_V_IF_ITOWER";

CREATE USER "ITOWER_RO" IDENTIFIED BY "12abZdfdS#$DF" DEFAULT TABLESPACE "LDPT" TEMPORARY TABLESPACE "LDPT_TEMP";
GRANT "CONNECT", "DBA", "RESOURCE" TO "ITOWER_RO";

CREATE USER "ITOWER" IDENTIFIED BY "12abZdfdS#$DF" DEFAULT TABLESPACE "LDPT" TEMPORARY TABLESPACE "LDPT_TEMP";
GRANT "CONNECT", "DBA", "RESOURCE" TO "ITOWER";
```

### 导入数据


